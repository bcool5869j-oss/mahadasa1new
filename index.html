<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mahadasha Degree Date Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 650px; margin: 40px auto; line-height: 1.6; }
    label { display:block; margin-top: 12px; font-weight: bold; }
    input, select { padding:6px; margin-top:4px; }
    .timebox input { width:60px; }
    button { margin-top:18px; padding:10px 20px; font-size: 1em; cursor:pointer; }
    #result { margin-top:25px; font-weight:bold; font-size: 1.2em; color:#006400; }
  </style>
</head>
<body>
  <h2>ðŸŒ™ Mahadasha Degree â†’ Date Calculator</h2>

  <!-- Start Date -->
  <label>Start Date (DD/MM/YYYY):
    <input id="startDate" type="date" value="2024-01-18">
  </label>

  <div class="timebox">
    Start Time (HH:MM:SS):
    <input id="startHour" type="number" value="9" min="1" max="12"> :
    <input id="startMin" type="number" value="24" min="0" max="59"> :
    <input id="startSec" type="number" value="9" min="0" max="59">
    <select id="startAmpm">
      <option>AM</option>
      <option selected>PM</option>
    </select>
  </div>

  <!-- End Date -->
  <label>End Date (DD/MM/YYYY):
    <input id="endDate" type="date" value="2028-01-18">
  </label>

  <div class="timebox">
    End Time (HH:MM:SS):
    <input id="endHour" type="number" value="10" min="1" max="12"> :
    <input id="endMin" type="number" value="0" min="0" max="59"> :
    <input id="endSec" type="number" value="40" min="0" max="59">
    <select id="endAmpm">
      <option selected>PM</option>
      <option>AM</option>
    </select>
  </div>

  <!-- Degrees -->
  <label>Degrees (0â€“30):
    <input id="deg" type="number" value="10" min="0" max="30">
  </label>

  <label>Minutes (0â€“59):
    <input id="min" type="number" value="0" min="0" max="59">
  </label>

  <button onclick="calc()">Calculate</button>
  <div id="result"></div>

<script>
function buildDate(dateId, hId, mId, sId, ampmId){
  const d = new Date(document.getElementById(dateId).value);
  let h = Number(document.getElementById(hId).value);
  const m = Number(document.getElementById(mId).value);
  const s = Number(document.getElementById(sId).value);
  const ampm = document.getElementById(ampmId).value;

  if(ampm === "PM" && h < 12) h += 12;
  if(ampm === "AM" && h === 12) h = 0;

  d.setHours(h, m, s, 0);
  return d;
}

function calc(){
  const s = buildDate("startDate","startHour","startMin","startSec","startAmpm");
  const e = buildDate("endDate","endHour","endMin","endSec","endAmpm");
  const deg = Number(document.getElementById('deg').value);
  const min = Number(document.getElementById('min').value);

  if (isNaN(deg) || isNaN(min) || !s || !e) {
    document.getElementById('result').innerText = "âš ï¸ Please fill all fields correctly.";
    return;
  }

  const decDeg = deg + min/60;
  const daysTotal = (e - s) / (1000*60*60*24);
  const offsetDays = (decDeg/30) * daysTotal;
  const result = new Date(s.getTime() + offsetDays * 24*60*60*1000);

  // Format result DD/MM/YYYY HH:MM:SS AM/PM
  const dd = String(result.getDate()).padStart(2,'0');
  const mm = String(result.getMonth()+1).padStart(2,'0');
  const yyyy = result.getFullYear();
  let hours = result.getHours();
  const mi = String(result.getMinutes()).padStart(2,'0');
  const ss = String(result.getSeconds()).padStart(2,'0');
  const ampm = hours >= 12 ? "PM" : "AM";
  hours = hours % 12;
  hours = hours ? hours : 12; // 0 â†’ 12
  const hh = String(hours).padStart(2,'0');
  const formatted = `${dd}/${mm}/${yyyy} ${hh}:${mi}:${ss} ${ampm}`;

  document.getElementById('result').innerText = "ðŸ“… Exact Date: " + formatted;
}
</script>
</body>
</html>